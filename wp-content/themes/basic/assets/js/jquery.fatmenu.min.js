!function(a,b,c){"use strict";var d={init:function(b,c){var d=this;d.$elem=a(c),d.options=a.extend({},a.fn.FatMenu.options,d.$elem.data(),b),d.userOptions=b,d.classes={group:"fm-group",layer:"fm-layer",breadcrumb:"fm-breadcrumb",overlay:"fm-overlay",trigger:"fm-trigger",triggerMain:"fm-main-trigger",triggerSearch:"fm-search-trigger",backButton:"fm-back-button",isMobile:"fm-is-mobile",isAnimate:"fm-is-animate",isOpen:"fm-is-open",isVisible:"fm-is-visible",isHidden:"fm-is-hidden"},d.elems={wrapper:".fm-wrapper",breadcrumbList:".fm-breadcrumb ul"},d.$breadcrumb=d.$elem.find(d.options.breadcrumbContainer),d.$wrapper=d.$elem.find(d.options.wrapperContainer),d.mobileMode=!1,d.supportCssAnimation=!0,d.colorized=!0,d.options.searchLayer=d.$elem.find("."+d.options.triggerSearchClass).attr("href"),d.options.navColor||(d.colorized=!1),d.detectCSSFeature("animation")||(d.supportCssAnimation=!1),d.onStartup()},onStartup:function(){var a=this;a.browserCheckCapability(),a.mobileInit(),a.triggerInit(),a.triggerListener(),a.options.overlay&&a.overlayInit(),a.optionsInit(),a.mobileCheck(),a.layerInit(),a.resizeEvent()},resizeEvent:function(){var c=this;a(b).on("resize",function(){c.$elem.find("."+c.options.visibleClass).length>0&&(c.hidePanel(c.$elem.find("."+c.options.visibleClass),"slideUp"),c.breadcrumbReset(),c.overlayHide(),c.$elem.find(".fm-is-active").removeClass("fm-is-active").css("background-color","")),c.mobileCheck(),c.$wrapper.css("background-color",""),c.$elem.find(".fm-layer").removeAttr("data-height")})},browserCheckCapability:function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},detectCSSFeature:function(a){var b=!1,d="Webkit Moz ms O".split(" "),e=c.createElement("div"),f=null;if(a=a.toLowerCase(),void 0!==e.style[a]&&(b=!0),b===!1){f=a.charAt(0).toUpperCase()+a.substr(1);for(var g=0;g<d.length;g++)if(void 0!==e.style[d[g]+f]){b=!0;break}}return b},mobileCheck:function(){var c=this;a(b).width()<c.options.mobileBreakpoint?(c.$elem.addClass(c.options.mobileClass),c.mobileMode=!0):(c.$elem.removeClass(c.options.mobileClass),c.mobileMode=!1)},mobileInit:function(){var b=this,c=a(".navbar-nav").find("li").clone(),d='<div class="fm-group"><div id="layer-main" class="fm-layer"><div class="container"><ul class="fm-textlines"></ul></div></div></div>';b.$wrapper.prepend(d);var e=a("#layer-main");e.find("ul").html(c).find("a").addClass("fm-textline "+b.options.triggerMainClass).wrapInner('<h3 class="fm-textline-title"></h3>'),b.$elem.find(".navbar-header > button").removeAttr("data-toggle data-target").on("click",function(c){c.preventDefault();var d=b.$wrapper.find("."+b.options.visibleClass);return a(this).hasClass("search-toggle")?d.length>0&&"layer-search-engine"==d.attr("id")?(b.hidePanel(d,"slideUp"),b.overlayHide(),!1):d.length>0&&"layer-search-engine"!=d.attr("id")?(b.hidePanel(d,"slideUp"),b.showPanel(a("#layer-search-engine"),"slideDown"),!1):(b.showPanel(a("#layer-search-engine"),"slideDown"),b.overlayShow(),!1):d.length>0&&"layer-main"==d.attr("id")?(b.hidePanel(d,"slideUp"),b.overlayHide(),!1):d.length>0&&"layer-main"!=d.attr("id")?(b.hidePanel(d,"slideUp"),b.showPanel(a("#layer-main"),"slideDown"),!1):(b.showPanel(a("#layer-main"),"slideDown"),b.overlayShow(),!1)})},optionsInit:function(){var b=this;a("."+b.options.overlayClass).on("click",function(a){a.preventDefault(),b.hidePanel(b.$wrapper.find("."+b.options.visibleClass),"slideUp"),setTimeout(function(){b.breadcrumbReset(),b.$elem.find(".fm-is-active").removeClass("fm-is-active").css("background-color","")},b.options.animationDuration),b.overlayHide()}),b.options.pushOnShow&&b.$elem.addClass("fm-pushOnShow")},overlayInit:function(){var b=this;a("body").append('<div class="'+b.options.overlayClass+'"></div>')},overlayShow:function(){var b=this;a("body").addClass(b.options.openMenuClass),a("."+b.options.overlayClass).css("display","block"),a("body").addClass(b.options.openMenuClass)},overlayHide:function(){var b=this;a("."+b.options.overlayClass).css("display","none"),b.supportCssAnimation?setTimeout(function(){a("body").removeClass(b.options.openMenuClass)},b.options.animationDuration):a("body").removeClass(b.options.openMenuClass)},layerInit:function(){var a=this;a.$elem.find(".fm-layer").addClass(a.options.hiddenClass)},showPanel:function(a,b){var c=this;"undefined"==typeof a.attr("data-height")&&a.attr("data-height",a.outerHeight()),"slideDown"==b?c.supportCssAnimation?(a.addClass(c.options.visibleClass+" fm-fadeInDown fm-is-animate").removeClass(c.options.hiddenClass),c.$wrapper.css("height",a.data("height")).addClass("fm-is-animate"),setTimeout(function(){a.removeClass("fm-fadeInDown fm-is-animate"),c.$wrapper.removeClass("fm-is-animate")},c.options.animationDuration)):(a.addClass(c.options.visibleClass).removeClass(c.options.hiddenClass),c.$wrapper.css("height",a.data("height"))):"slideLeft"==b?c.supportCssAnimation?(a.addClass(c.options.visibleClass+" fm-fadeInRight fm-is-animate").removeClass(c.options.hiddenClass),c.$wrapper.css("height",a.data("height")).addClass("fm-is-animate"),setTimeout(function(){a.removeClass("fm-fadeInRight fm-is-animate"),c.$wrapper.removeClass("fm-is-animate")},c.options.animationDuration)):(a.removeClass(c.options.hiddenClass).addClass(c.options.visibleClass),c.$wrapper.css("height",a.data("height"))):"slideRight"==b&&(c.supportCssAnimation?(a.addClass(c.options.visibleClass+" fm-fadeInLeft fm-is-animate").removeClass(c.options.hiddenClass),c.$wrapper.css("height",a.data("height")).addClass("fm-is-animate"),setTimeout(function(){a.removeClass("fm-fadeInLeft fm-is-animate"),c.$wrapper.removeClass("fm-is-animate")},c.options.animationDuration)):(a.addClass(c.options.visibleClass).removeClass(c.options.hiddenClass),c.$wrapper.css("height",a.data("height"))))},hidePanel:function(a,b){var c=this;"slideUp"==b?c.supportCssAnimation?(a.addClass("fm-fadeOutUp fm-is-animate"),c.$wrapper.css("height","0"),setTimeout(function(){a.removeClass("fm-fadeOutUp fm-is-animate "+c.options.visibleClass).addClass(c.options.hiddenClass)},c.options.animationDuration)):(c.$wrapper.css("height","0"),a.addClass(c.options.hiddenClass).removeClass(c.options.visibleClass)):"slideLeft"==b?c.supportCssAnimation?(a.addClass("fm-fadeOutLeft fm-is-animate"),setTimeout(function(){a.removeClass(c.options.visibleClass+" fm-fadeOutLeft fm-is-animate").addClass(c.options.hiddenClass)},c.options.animationDuration)):a.addClass(c.options.hiddenClass).removeClass(c.options.visibleClass):"slideRight"==b?c.supportCssAnimation?(a.addClass("fm-fadeOutRight fm-is-animate"),setTimeout(function(){a.removeClass(c.options.visibleClass+" fm-fadeOutRight fm-is-animate").addClass(c.options.hiddenClass)},c.options.animationDuration)):a.addClass(c.options.hiddenClass).removeClass(c.options.visibleClass):"slideLeftMobile"==b&&(c.supportCssAnimation?(a.addClass("fm-fadeOutLeft fm-is-animate"),setTimeout(function(){a.removeClass(c.options.visibleClass+" fm-fadeOutLeft fm-is-animate").addClass(c.options.hiddenClass)},c.options.animationDuration)):a.addClass(c.options.hiddenClass).removeClass(c.options.visibleClass))},breadcrumbAdd:function(a){var b=this,c=a[0].getAttribute("data-name"),d=a.attr("id");return b.mobileMode?!1:void b.$breadcrumb.append('<li><a class="'+b.options.triggerClass+' fm-is-animate fm-fadeInRight" href="#'+d+'">'+c+"</a></li>")},breadcrumbDelete:function(a){var b=this,c=a.attr("id"),d=b.$breadcrumb.find('a[href="#'+c+'"]').parent().index(),e=b.$breadcrumb.find("li");if(b.mobileMode)return!1;for(var f=e.length-1;f>=0;f--)f>d&&e[f].remove()},breadcrumbReset:function(){var a=this;return a.mobileMode?!1:void a.$breadcrumb.html("")},triggerInit:function(){var b=this;b.$elem.find("."+b.options.triggerClass).each(function(c,d){var e=a(d),f=a(e.attr("href")),g=e.find('[class$="-title"]').text().trim(),h=(e.attr("href").replace("#layer-",""),e.closest(".fm-layer").attr("id")),i=f.closest("."+b.options.groupClass);if(e.hasClass(b.options.triggerSearchClass)||e.append('<span class="fm-trigger-icon">'+b.options.TriggerButtonIcon+"</span>"),e.parents(".navbar").length>0)if(b.colorized){var j=b.options.navColor[c];e.addClass(b.options.triggerMainClass).attr({"data-group":g}),"undefined"!=typeof b.options.navColor[c]&&e.attr({"data-color":j})}else e.addClass(b.options.triggerMainClass).attr("data-group",g);else f.data("name")||(f.attr("data-name",g),f.find("ul").prepend('<li class="back-item"><a class="'+b.options.backButtonClass+' fm-textline" href="#'+h+'"><h3 class="fm-textline-title">'+b.options.BackButtonContent+"</h3></a></li>")),i.data("group")||i.attr("data-group",g)})},triggerListener:function(){var b=this;b.$elem.on("click","."+b.options.triggerClass+", ."+b.options.backButtonClass,function(c){c.preventDefault();var d=a(this),e=b.$elem.find("."+b.options.visibleClass),f=e.attr("id"),g=(e.data("name"),e.closest("."+b.options.groupClass).data("group")),h=a(d.attr("href")),i=(h.data("name"),h.attr("id")),j=h.closest("."+b.options.groupClass).data("group"),k=!1,l=!1,m=!1,n=!1;if(d.closest("."+b.options.breadcrumbClass).length>0&&(k=!0),d.hasClass(b.options.triggerMainClass)&&(l=!0),d.hasClass(b.options.backButtonClass)&&(m=!0),d.hasClass(b.options.triggerSearchClass)&&(n=!0,setTimeout(function(){a(b.options.searchLayer).find(".form-control").focus()},b.options.animationDuration)),m)return b.hidePanel(e,"slideRight"),b.showPanel(h,"slideRight"),b.breadcrumbDelete(h),!1;if(e.length<1&&!k)return d.addClass("fm-is-active"),b.colorized&&"undefined"!=typeof d.data("color")&&b.colorize(d.data("color")),b.showPanel(h,"slideDown"),b.overlayShow(),b.breadcrumbAdd(h),!1;if(k)return e.length>1?!1:e.length>0&&f!=i?(b.hidePanel(e,"slideRight"),b.showPanel(h,"slideRight"),b.breadcrumbDelete(h),!1):!1;if(e.length>0&&!k){if(!l&&f!=i&&g==j)return b.hidePanel(e,"slideLeft"),b.showPanel(h,"slideLeft"),b.breadcrumbAdd(h),!1;if(l&&g!=j&&f!=i)return b.mobileMode?n?(b.hidePanel(e,"slideUp"),b.showPanel(h,"slideDown"),!1):(b.hidePanel(e,"slideLeft"),b.showPanel(h,"slideLeft"),!1):(b.$elem.find("."+b.options.triggerMainClass).removeClass("fm-is-active").css("background-color",""),d.addClass("fm-is-active"),b.hidePanel(e,"slideUp"),b.breadcrumbReset(),b.colorized&&"undefined"!=typeof d.data("color")&&b.colorize(d.data("color")),b.showPanel(h,"slideDown"),b.breadcrumbAdd(h),!1);if(l&&g==j)return b.hidePanel(e,"slideUp"),setTimeout(function(){b.breadcrumbReset(),d.removeClass("fm-is-active").css("background-color","")},b.options.animationDuration),b.overlayHide(),!1}})},colorize:function(a){var b=this;return b.mobileMode?!1:b.colorized?(b.$wrapper.css("background-color",a),b.$elem.find("."+b.options.breadcrumbClass).css("background-color",b.shadeBlend(-.25,a)),void b.$elem.find(".fm-is-active").css("background-color",b.shadeBlend(-.25,a))):!1},shadeBlend:function(a,b,c){var d=0>a?-1*a:a,e=Math.round,f=parseInt;if(b.length>7){var g=b.split(","),h=(c?c:0>a?"rgb(0,0,0)":"rgb(255,255,255)").split(","),i=f(g[0].slice(4)),j=f(g[1]),k=f(g[2]);return"rgb("+(e((f(h[0].slice(4))-i)*d)+i)+","+(e((f(h[1])-j)*d)+j)+","+(e((f(h[2])-k)*d)+k)+")"}var g=f(b.slice(1),16),h=f((c?c:0>a?"#000000":"#FFFFFF").slice(1),16),l=g>>16,m=g>>8&255,n=255&g;return"#"+(16777216+65536*(e(((h>>16)-l)*d)+l)+256*(e(((h>>8&255)-m)*d)+m)+(e(((255&h)-n)*d)+n)).toString(16).slice(1)}};a.fn.FatMenu=function(a){return this.each(function(){"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw Error("Second argument not supported");if(null===b)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw TypeError("Argument must be an object");return a.prototype=b,new a}}();var b=Object.create(d);b.init(a,this)}),this},a.fn.FatMenu.options={pushOnShow:!1,overlay:!0,mobileBreakpoint:992,navColor:!1,BackButtonContent:'<i class="fa fa-angle-left"></i> Retour',TriggerButtonIcon:'<i class="fa fa-angle-right"></i>',animationDuration:250,wrapperContainer:".fm-wrapper",breadcrumbClass:"fm-breadcrumb",breadcrumbContainer:".fm-breadcrumb ul",groupClass:"fm-group",layerClass:"fm-layer",triggerClass:"fm-trigger",triggerMainClass:"fm-main-trigger",overlayClass:"fm-overlay",openMenuClass:"fm-is-open",triggerSearchClass:"fm-search-trigger",mobileClass:"fm-is-mobile",backButtonClass:"fm-back-button",visibleClass:"fm-is-visible",hiddenClass:"fm-is-hidden"}}(jQuery,window,document);